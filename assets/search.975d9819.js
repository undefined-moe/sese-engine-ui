import{d as H,u as Q,a as w,o as h,c as p,e as o,t as F,f as c,F as $,g as T,w as J,r as L,T as K,_ as se,h as S,i as ne,j as re,k as oe,l as ue,m as b,n as O,p as ie,q as ae,s as I,v,x as ce,y as le,z as A,A as fe,B as de}from"./app.866101c3.js";const he={class:"result-item relative overflow-visible",flex:"~ col",text:"left",m:"b-4"},pe={class:"flex justify-between items-center"},_e=["href"],ye={class:"not-italic",text:"xs"},me=["href"],Ee={text:"xs"},ge=["href"],Fe={class:"top-0 truncate"},we=["innerHTML"],Re={key:1},be=o("div",{class:"inline-flex justify-start items-center border",p:"1",m:"1"},[o("div",{"i-ri-alert-line":""}),o("span",{m:"l-1"},"\u6211\u4EEC\u7684\u63A2\u6D4B\u5668\u5BF9\u8FD9\u4E2A\u5947\u602A\u7684\u7F51\u7AD9\u6CA1\u6709\u6548\u679C\uFF01")],-1),ve=[be],$e={class:"reason-container absolute top-0 left-180 min-h-full justify-center hidden transition",w:"64",opacity:"0",flex:"~ col"},Ce={class:"search-reason",p:"l-2",text:"xs"},xe=H({__name:"ResultItem",props:{keywords:null,result:null},setup(e){const t=e,n=Q(),r=w(()=>{var s;const u=(s=n.query.q)==null?void 0:s.toString();return u!=null&&u.startsWith("site:")?u.split(" ").slice(1).join(" "):u}),i=(u,s)=>{let f=u.replace(/</g,"&lt;").replace(/>/g,"&gt;");return s.forEach(E=>{const R=new RegExp(E,"gi");f=f.replace(R,y=>`<em class="highlight">${y}</em>`)}),f},l=w(()=>new URL(t.result.\u7F51\u5740).hostname),a=w(()=>`site:${l.value}`),d=w(()=>{var u;return`/search?q=${a.value} ${(u=r.value)==null?void 0:u.trim()}`});return(u,s)=>(h(),p("div",he,[o("span",pe,[o("a",{href:e.result.\u7F51\u5740,target:"_blank",class:"truncate"},[o("cite",ye,F(e.result.\u7F51\u5740),1)],8,_e),o("a",{href:c(d),class:"cursor-pointer related-info sese-link transition truncate"},[o("cite",Ee,"\u5728 "+F(c(l))+" \u4E2D\u627E\u5230 "+F(e.result.\u76F8\u540C\u57DF\u540D\u4E2A\u6570)+" \u4E2A\u76F8\u5173\u9875\u9762",1)],8,me)]),e.result.\u4FE1\u606F?(h(),p($,{key:0},[o("a",{href:e.result.\u7F51\u5740,target:"_blank",class:"text-lg text-blue-900 hover:underline dark:text-blue-500"},[o("h3",Fe,F(e.result.\u4FE1\u606F.\u6807\u9898),1)],8,ge),o("p",{text:"sm",innerHTML:i(e.result.\u4FE1\u606F.\u63CF\u8FF0||e.result.\u4FE1\u606F.\u6587\u672C,e.keywords)},null,8,we)],64)):(h(),p("div",Re,ve)),T(K,null,{default:J(()=>[o("div",$e,[o("blockquote",Ce,[(h(!0),p($,null,L(e.result.\u539F\u56E0,(f,E)=>(h(),p("span",{key:E,class:"block"},F(E)+"\uFF1A"+F(f.toFixed(3)),1))),128))])])]),_:1})]))}});const Ae={},ke={class:"absolute loading-container flex justify-center items-center fixed inset-0",h:"screen",m:"auto"},Te=o("div",{class:"spinner"},null,-1),Le=[Te];function Se(e,t){return h(),p("div",ke,Le)}const Be=se(Ae,[["render",Se]]),je="/rimo-touch-fish.png",Pe=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,De=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,qe=/^["{[]|^-?[0-9][0-9.]{0,14}$/;function Ne(e,t){if(!(e==="__proto__"||e==="constructor"))return t}function Oe(e,t={}){if(typeof e!="string")return e;const n=e.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="null")return null;if(n==="nan")return NaN;if(n==="infinity")return 1/0;if(n!=="undefined"){if(!qe.test(e)){if(t.strict)throw new SyntaxError("Invalid JSON");return e}try{return Pe.test(e)||De.test(e)?JSON.parse(e,Ne):JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}}const Ie=/#/g,Ue=/&/g,Ve=/=/g,M=/\+/g,He=/%5B/gi,Qe=/%5D/gi,Je=/%5E/gi,Ke=/%60/gi,Me=/%7B/gi,We=/%7C/gi,ze=/%7D/gi,Ge=/%20/gi;function Xe(e){return encodeURI(""+e).replace(We,"|").replace(He,"[").replace(Qe,"]")}function B(e){return Xe(e).replace(M,"%2B").replace(Ge,"+").replace(Ie,"%23").replace(Ue,"%26").replace(Ke,"`").replace(Me,"{").replace(ze,"}").replace(Je,"^")}function k(e){return B(e).replace(Ve,"%3D")}function W(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Ye(e){return W(e.replace(M," "))}function Ze(e=""){const t={};e[0]==="?"&&(e=e.substr(1));for(const n of e.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const i=W(r[1]);if(i==="__proto__"||i==="constructor")continue;const l=Ye(r[2]||"");t[i]?Array.isArray(t[i])?t[i].push(l):t[i]=[t[i],l]:t[i]=l}return t}function et(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(n=>`${k(e)}=${B(n)}`).join("&"):`${k(e)}=${B(t)}`:k(e)}function tt(e){return Object.keys(e).map(t=>et(t,e[t])).join("&")}const st=/^\w+:(\/\/)?/,nt=/^\/\/[^/]+/;function z(e,t=!1){return st.test(e)||t&&nt.test(e)}const rt=/\/$|\/\?/;function j(e="",t=!1){return t?rt.test(e):e.endsWith("/")}function ot(e="",t=!1){if(!t)return(j(e)?e.slice(0,-1):e)||"/";if(!j(e,!0))return e||"/";const[n,...r]=e.split("?");return(n.slice(0,-1)||"/")+(r.length?`?${r.join("?")}`:"")}function ut(e="",t=!1){if(!t)return e.endsWith("/")?e:e+"/";if(j(e,!0))return e||"/";const[n,...r]=e.split("?");return n+"/"+(r.length?`?${r.join("?")}`:"")}function it(e=""){return e.startsWith("/")}function at(e=""){return(it(e)?e.substr(1):e)||"/"}function ct(e,t){if(ft(t)||z(e))return e;const n=ot(t);return e.startsWith(n)?e:ht(n,e)}function lt(e,t){const n=G(e),r={...Ze(n.search),...t};return n.search=tt(r),pt(n)}function ft(e){return!e||e==="/"}function dt(e){return e&&e!=="/"}function ht(e,...t){let n=e||"";for(const r of t.filter(dt))n=n?ut(n)+at(r):r;return n}function G(e="",t){if(!z(e,!0))return t?G(t+e):U(e);const[n="",r,i=""]=(e.replace(/\\/g,"/").match(/([^:/]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[l="",a=""]=(i.match(/([^/?#]*)(.*)?/)||[]).splice(1),{pathname:d,search:u,hash:s}=U(a);return{protocol:n,auth:r?r.substr(0,r.length-1):"",host:l,pathname:d,search:u,hash:s}}function U(e=""){const[t="",n="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:n,hash:r}}function pt(e){const t=e.pathname+(e.search?(e.search.startsWith("?")?"":"?")+e.search:"")+e.hash;return e.protocol?e.protocol+"//"+(e.auth?e.auth+"@":"")+e.host+t:t}class _t extends Error{constructor(){super(...arguments),this.name="FetchError"}}function yt(e,t,n){let r="";e&&n&&(r=`${n.status} ${n.statusText} (${e.toString()})`),t&&(r=`${t.message} (${r})`);const i=new _t(r);return Object.defineProperty(i,"request",{get(){return e}}),Object.defineProperty(i,"response",{get(){return n}}),Object.defineProperty(i,"data",{get(){return n&&n._data}}),i}const mt=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function V(e="GET"){return mt.has(e.toUpperCase())}function Et(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const gt=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Ft=/^application\/(?:[\w!#$%&*`\-.^~]*\+)?json(;.+)?$/i;function wt(e=""){if(!e)return"json";const t=e.split(";").shift();return Ft.test(t)?"json":gt.has(t)||t.startsWith("text/")?"text":"blob"}const Rt=new Set([408,409,425,429,500,502,503,504]);function X(e){const{fetch:t,Headers:n}=e;function r(a){const d=a.error&&a.error.name==="AbortError"||!1;if(a.options.retry!==!1&&!d){const s=typeof a.options.retry=="number"?a.options.retry:V(a.options.method)?0:1,f=a.response&&a.response.status||500;if(s>0&&Rt.has(f))return i(a.request,{...a.options,retry:s-1})}const u=yt(a.request,a.error,a.response);throw Error.captureStackTrace&&Error.captureStackTrace(u,i),u}const i=async function(d,u={}){const s={request:d,options:{...e.defaults,...u},response:void 0,error:void 0};s.options.onRequest&&await s.options.onRequest(s),typeof s.request=="string"&&(s.options.baseURL&&(s.request=ct(s.request,s.options.baseURL)),(s.options.query||s.options.params)&&(s.request=lt(s.request,{...s.options.params,...s.options.query})),s.options.body&&V(s.options.method)&&Et(s.options.body)&&(s.options.body=typeof s.options.body=="string"?s.options.body:JSON.stringify(s.options.body),s.options.headers=new n(s.options.headers),s.options.headers.has("content-type")||s.options.headers.set("content-type","application/json"),s.options.headers.has("accept")||s.options.headers.set("accept","application/json"))),s.response=await t(s.request,s.options).catch(async E=>(s.error=E,s.options.onRequestError&&await s.options.onRequestError(s),r(s)));const f=(s.options.parseResponse?"json":s.options.responseType)||wt(s.response.headers.get("content-type")||"");if(f==="json"){const E=await s.response.text(),R=s.options.parseResponse||Oe;s.response._data=R(E)}else f==="stream"?s.response._data=s.response.body:s.response._data=await s.response[f]();return s.options.onResponse&&await s.options.onResponse(s),s.response.ok||s.options.onResponseError&&await s.options.onResponseError(s),s.response.ok?s.response:r(s)},l=function(d,u){return i(d,u).then(s=>s._data)};return l.raw=i,l.create=(a={})=>X({...e,defaults:{...e.defaults,...a}}),l}const Y=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),bt=Y.fetch||(()=>Promise.reject(new Error("[ohmyfetch] global.fetch is not supported!"))),vt=Y.Headers,$t=X({fetch:bt,Headers:vt}),Ct=$t.create({baseURL:"https://sese-proxy.azurewebsites.net/api/",retry:0,async onResponse({response:e}){const{useToast:t}=await S(()=>import("./app.866101c3.js").then(r=>r.I),["assets/app.866101c3.js","assets/index.b174e0c8.css"]),n=t();typeof e._data=="string"&&n.error("\u574F\u4E86\uFF01\u670D\u52A1\u5668\u574F\u4E86\uFF01\u5FEB\u53BB\u6253\u8389\u6CAB\u9171\uFF01")},async onResponseError({response:e}){const{useToast:t}=await S(()=>import("./app.866101c3.js").then(r=>r.I),["assets/app.866101c3.js","assets/index.b174e0c8.css"]),n=t();n.error(`${e.status} ${e.statusText}`),e._data&&n.error(e._data.\u4FE1\u606F)}});async function xt(e){const{useToast:t}=await S(()=>import("./app.866101c3.js").then(l=>l.I),["assets/app.866101c3.js","assets/index.b174e0c8.css"]),n=t(),r={q:e.q||"",slice:e.slice||"0:10"};return await Ct("/search",{params:r}).catch(l=>{console.error(l),n.error("\u574F\u4E86\uFF01\u670D\u52A1\u5668\u574F\u4E86\uFF01\u5FEB\u53BB\u6253\u8389\u6CAB\u9171\uFF01")})}const At={p:"2",h:"screen"},kt={p:"l-2 lt-sm:l-0",class:"relative flex justify-start items-center lt-sm:mt-6"},Tt=["src"],Lt=o("div",{"i-ri-heart-line":""},null,-1),St=[Lt],Bt={key:0,m:"l-24 lt-sm:l-0",p:"2",class:"max-w-2xl"},jt={text:"left sm gray-500",m:"b-2"},Pt={key:1,text:"left",m:"t-8"},Dt={text:"red-500"},qt={m:"t-8",text:"left"},Nt={p:"4"},Ot={class:"list-circle"},It=["href","title"],Ut=o("img",{src:je,alt:"\u6478\u9C7C"},null,-1),Vt={key:2,m:"t-6 b-4",class:"pagination-container flex justify-center items-center"},Ht=o("div",{"i-ri-arrow-left-line":""},null,-1),Qt=[Ht],Jt=["onClick"],Kt=o("div",{"i-ri-arrow-right-line":""},null,-1),Mt=[Kt],Wt={key:1,m:"t-10"},Gt=H({__name:"search",setup(e){var D,q;const{t}=ne(),{enter:n}=re(),r=Q(),i=oe(),l=ue(),a=w(()=>{var g;return((g=r.query.q)==null?void 0:g.toString())||""}),d=b(a.value);O(()=>a.value,()=>{l.setNewKeyword(a.value),d.value=a.value});const u=b((D=r.query.slice)==null?void 0:D.toString()),s=b(10),f=b(),E=w(()=>f.value&&f.value.\u5206\u8BCD||[d.value]);ie({title:w(()=>`${a.value} - ${t("sese.title")}`)});const R=async()=>{l.isLoading=!0;const g=await xt({q:d.value,slice:u.value});l.isLoading=!1,f.value=g};ae(async()=>{R()});const y=b(u.value?parseInt((q=u.value)==null?void 0:q.split(":")[0])/s.value+1:1),C=g=>{y.value=g,u.value=`${(y.value-1)*s.value}:${y.value*s.value}`,i.push({path:"/search",query:{q:d.value,slice:u.value}}),R()};O(()=>l.savedKeyword,()=>{R()});const x=w(()=>{if(f.value&&f.value.\u603B\u6570){const g=Math.ceil(f.value.\u603B\u6570/s.value);return g<=10?g:10}else return 0}),P=()=>{y.value=1,u.value=`0:${s.value}`,n(d.value)};return(g,m)=>{const Z=Be,ee=de,te=xe;return h(),p("div",At,[T(K,null,{default:J(()=>[c(l).isLoading?(h(),I(Z,{key:0})):v("",!0)]),_:1}),o("div",kt,[o("a",{class:"cursor-pointer inline-flex justify-center lt-sm:absolute -top-5 left-5",m:"r-3 b-1",onClick:m[0]||(m[0]=()=>{c(i).push("/")})},[o("img",{class:"w-16 filter drop-shadow",src:c(ce),alt:"Rimo And XiaoYun"},null,8,Tt)]),T(ee,{modelValue:c(d),"onUpdate:modelValue":m[1]||(m[1]=_=>le(d)?d.value=_:null),class:"inline-flex",enter:()=>{P()}},null,8,["modelValue","enter"]),o("button",{m:"l-2",p:"2",class:"icon-btn flex justify-center items-center border rounded rounded-full !outline-none",onClick:m[2]||(m[2]=_=>P())},St)]),c(f)?(h(),p("div",Bt,[o("div",jt," \u627E\u5230\u7EA6 "+F(c(f).\u603B\u6570)+" \u4E2A\u7ED3\u679C ",1),c(f).\u603B\u6570?(h(!0),p($,{key:0},L(c(f).\u7ED3\u679C,(_,N)=>(h(),I(te,{key:N,keywords:c(E),se:"",result:_},null,8,["keywords","result"]))),128)):(h(),p("div",Pt,[A(" \u627E\u4E0D\u5230\u548C\u60A8\u67E5\u8BE2\u7684\u300C"),o("strong",Dt,F(c(d)),1),A("\u300D\u76F8\u7B26\u7684\u5185\u5BB9\u6216\u4FE1\u606F\uFF01 "),o("p",{class:"cursor-pointer hover:underline",text:"sm",m:"t-4",onClick:m[3]||(m[3]=_=>c(i).go(-1))}," \u8FD4\u56DE\u4E0A\u4E00\u9875 "),o("p",qt,[A(" \u5EFA\u8BAE\uFF1A "),o("ul",Nt,[o("li",Ot,[o("a",{class:"hover:underline",href:`https://www.google.com/search?q=${c(d)}`,target:"_blank",title:c(d)}," \u4F7F\u7528 Google \u641C\u7D22 ",8,It)])]),Ut])])),c(x)?(h(),p("div",Vt,[c(y)>1?(h(),p("span",{key:0,class:"page-link",text:"sm",p:"r-1",m:"r-1",onClick:m[4]||(m[4]=_=>C(c(y)-1))},Qt)):v("",!0),(h(!0),p($,null,L(c(x),_=>(h(),p("span",{key:_,p:"1",m:"1",class:fe(["pagination-page",c(y)===_?"text-black dark:text-white":"text-blue-600 dark:text-blue-500 cursor-pointer hover:underline"]),text:"sm",onClick:N=>c(y)===_?null:C(_)},F(_),11,Jt))),128)),c(y)<c(x)?(h(),p("span",{key:1,class:"page-link",text:"sm",p:"l-1",m:"l-1",onClick:m[5]||(m[5]=_=>C(c(y)+1))},Mt)):v("",!0)])):v("",!0)])):c(l).isLoading?v("",!0):(h(),p("div",Wt," \u670D\u52A1\u5668\u4E0D\u2026\u2026\u4E0D\u884C\u4E86\u2026\u2026 "))])}}});export{Gt as default};
